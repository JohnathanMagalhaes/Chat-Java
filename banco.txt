create database dobroye;

use dobroye;

CREATE TABLE `usuario` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NOME` varchar(60) NOT NULL,
  `EMAIL` varchar(250) NOT NULL,
  `SENHA` varchar(30) NOT NULL,
  `BIOGRAFIA` varchar(60) DEFAULT NULL,
  `SEXO` varchar(12) NOT NULL,
  `IMAGEM` longblob,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1


CREATE TABLE `chat` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ID_USUARIO_P` int(11) NOT NULL,
  `ID_USUARIO_S` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ID_USUARIO_P` (`ID_USUARIO_P`),
  KEY `ID_USUARIO_F` (`ID_USUARIO_S`),
  CONSTRAINT `ID_USUARIO_F` FOREIGN KEY (`ID_USUARIO_S`) REFERENCES `usuario` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `ID_USUARIO_P` FOREIGN KEY (`ID_USUARIO_P`) REFERENCES `usuario` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1

CREATE TABLE `listachat` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ID_CHAT` int(11) NOT NULL,
  `ID_USUARIO` int(11) NOT NULL,
  `TEXTO` varchar(4000) NOT NULL,
  `DATA` datetime NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ID_CHAT` (`ID_CHAT`),
  KEY `ID_USUARIO` (`ID_USUARIO`),
  CONSTRAINT `ID_CHAT` FOREIGN KEY (`ID_CHAT`) REFERENCES `chat` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `ID_USUARIO` FOREIGN KEY (`ID_USUARIO`) REFERENCES `usuario` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=latin1
